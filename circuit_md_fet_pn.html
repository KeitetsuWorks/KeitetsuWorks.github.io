<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="description" content="KeitetsuWorks - MP4212を使用したモータドライバ">
    <title>KeitetsuWorks - MP4212を使用したモータドライバ</title>

    <link rel="shortcut icon" href="img/favicon.ico">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="css/styles.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.css">

    <script src="js/common.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PSLDBJZ3HB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-PSLDBJZ3HB');
    </script>
    <script data-ad-client="ca-pub-8284710410017563" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  </head>
  <body class="mdl-keitetsu mdl-color--grey-100 mdl-color-text--grey-700">
    <div class="mdl-layout mdl-js-layout">
      <header class="mdl-layout__header mdl-layout__header--waterfall">
        <!-- Top row, always visible -->
        <div class="mdl-layout__header-row">
          <!-- Title -->
          <span class="mdl-layout-title">KeitetsuWorks</span>
        </div>

        <!-- Tabs -->
        <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
          <a class="mdl-layout__tab" href="index.html">トップページ</a>
          <a class="mdl-layout__tab" href="https://keitetsu.blogspot.com/" target="_blank">BLOG</a>
          <a class="mdl-layout__tab" href="mokei.html">鉄道模型</a>
          <a class="mdl-layout__tab is-active" href="circuit.html">電子工作</a>
          <a class="mdl-layout__tab" href="notebook.html">雑記</a>
        </div>
      </header>
      <div class="mdl-layout__drawer">
        <span class="mdl-layout-title">KeitetsuWorks</span>
        <nav class="mdl-navigation">
          <a class="mdl-navigation__link" href="index.html">トップページ</a>
          <a class="mdl-navigation__link" href="https://keitetsu.blogspot.com/" target="_blank">BLOG</a>
          <a class="mdl-navigation__link" href="mokei.html">鉄道模型</a>
          <a class="mdl-navigation__link is-active" href="circuit.html">電子工作</a>
          <a class="mdl-navigation__link" href="notebook.html">雑記</a>
        </nav>
      </div>
      <main class="mdl-layout__content">
        <div class="contents mdl-grid mdl-grid--no-spacing">
          <div class="mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--4-col-phone">
            <div class="mdl-grid">
              <section class="mdl-cell mdl-cell--12-col mdl-shadow--4dp article">
                <h3>FETモジュール MP4212を使用したモータドライバ</h3>
                <h4>Nch MOS FETとPch MOS FETで構成するモータドライバ</h4>
                <p>
                  PICなどのマイコンの入出力ポートの最大定格電流は20mA程度であるため，マイコンの制御信号を直接使用して直接モータを回転させることはできません．
                  ゆえに，マイコンの制御信号でモータの回転を制御するためには，何らかの制御信号の増幅回路が必要となります．これが一般にモータドライバと呼ばれている回路です．
                  本ページでは，FETを使用してモータドライバを構成した例を紹介したいと思います．
                </p>
                <p>
                  ここでは詳細な回路動作などの説明は割愛して，とりあえず動くモノを作ることに重点を置きました．
                  ここで紹介する回路は最大定格電圧12Vの鉄道模型（Nゲージ）のモータ制御のために製作したものですので，大抵の小型モータであれば制御することが可能だと思います．
                </p>

                <h4>ホビー用途のHブリッジ回路製作に最適！FETモジュール MP4212</h4>
                <p>
                  FETでHブリッジ回路を構成しようとした場合，最低でも4個のFETが必要になります．
                  今回は極力部品点数を少なく，比較的簡単に製作できる設計にしたかったので，東芝のFETモジュール MP4212を採用することにしました．
                  MP4212には，NchとPchのFETが各2個ずつ合計4個のFETがパッケージされており，Hブリッジ回路の構成に適していると思います．
                  小型のパッケージですが，比較的大電力を高速にスイッチングできるほか，4Vからの駆動に対応しており，ホビー用途には嬉しい仕様ではないかと思います．
                  MP4212のデータシートはインターネット上からダウンロードできます．
                </p>

                <h4>参考文献</h4>
                <p>
                  モータドライバの設計・製作にあたり，下記のWebページを参考にさせていただきました．
                  リンク先では一般的なFETを4個使用してモータドライバを構成されていますが，これをMP4212に置き換えることにしました．
                </p>
                <ul>
                  <li>参考資料: <a href="http://www.maizuru-ct.ac.jp/control/machida/elec/motor/index.htm" target="_blank">舞鶴工業高等専門学校 電子制御工学科 町田秀和研究室 | 各種DCモータドライバ回路集</a></li>
                </ul>

                <h4>回路</h4>
                <h5>回路図</h5>
                <p>
                  回路図を下に示します．部品点数も少なく，実装面積をコンパクトに収めることができそうです．
                  電源電圧は12Vで，マイコンからの制御信号の電圧は5Vを想定しています．
                  信号線は2本で，「正転」，「逆転」，「ブレーキ」の3動作を実現できます．
                  この回路ではモータの2端子が開放状態になることがありませんので，「ストップ（フリー）」の動作はできません．
                </p>

                <a href="img/circuit_md_fet_pn/schematic.png" data-lightbox="md" data-title="回路図">
                  <img src="img/circuit_md_fet_pn/schematic.png" alt="回路図" />
                </a>

                <h5>使用部品</h5>
                <p>
                  下表に使用部品の一覧を示します．参考単価をクリックすると，秋月電子通商，共立エレショップまたはマルツパーツ館のページに飛びます．
                  コネクタ類は，モータドライバの使用用途に応じて各自で変更してください．
                </p>
                <div class="table-wrap">
                  <table class="mdl-data-table mdl-js-data-table">
                    <thead>
                      <tr>
                        <th class="mdl-data-table__cell--non-numeric">番号</th>
                        <th class="mdl-data-table__cell--non-numeric">部品名</th>
                        <th class="mdl-data-table__cell--non-numeric">型番</th>
                        <th>数量</th>
                        <th class="mdl-data-table__cell--non-numeric">参考価格</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">R1, R2</td>
                        <td class="mdl-data-table__cell--non-numeric">炭素皮膜抵抗</td>
                        <td class="mdl-data-table__cell--non-numeric">各社 1/4W 330&Omega;</td>
                        <td>2</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/e/erd25s" target="_blank">1円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">R3 - R6</td>
                        <td class="mdl-data-table__cell--non-numeric">炭素皮膜抵抗</td>
                        <td class="mdl-data-table__cell--non-numeric">各社 1/4W 10&Omega;</td>
                        <td>4</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/e/erd25s" target="_blank">1円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">C1, C2</td>
                        <td class="mdl-data-table__cell--non-numeric">積層セラミック<br />コンデンサ</td>
                        <td class="mdl-data-table__cell--non-numeric">村田製作所 50V 0.1&micro;F</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/g/gP-00090/" target="_blank">10円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">U1, U2</td>
                        <td class="mdl-data-table__cell--non-numeric">フォトカプラ</td>
                        <td class="mdl-data-table__cell--non-numeric">東芝 TLP250</td>
                        <td>2</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/g/gI-02889/" target="_blank">150円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">D1 - D4</td>
                        <td class="mdl-data-table__cell--non-numeric">ファストリカバリ<br />ダイオード</td>
                        <td class="mdl-data-table__cell--non-numeric">PANJIT ER504</td>
                        <td>4</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/g/gI-02230/" target="_blank">35円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric">Q1 - Q4</td>
                        <td class="mdl-data-table__cell--non-numeric">FETモジュール</td>
                        <td class="mdl-data-table__cell--non-numeric">東芝 MP4212</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric">250円</td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric"></td>
                        <td class="mdl-data-table__cell--non-numeric">基板</td>
                        <td class="mdl-data-table__cell--non-numeric">サンハヤト 銅張積層板 17</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://eleshop.jp/shop/g/g65N418/" target="_blank">572円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric"></td>
                        <td class="mdl-data-table__cell--non-numeric">ICソケット</td>
                        <td class="mdl-data-table__cell--non-numeric">各社 丸ピン DIP 8ピン</td>
                        <td>2</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/g/gP-00035/" target="_blank">15円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric"></td>
                        <td class="mdl-data-table__cell--non-numeric">XAコネクタ</td>
                        <td class="mdl-data-table__cell--non-numeric">JST XAコネクタ ベース付ポスト サイド型 4P</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://www.marutsu.co.jp/shohin_64063/" target="_blank">104円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric"></td>
                        <td class="mdl-data-table__cell--non-numeric">XAコネクタ</td>
                        <td class="mdl-data-table__cell--non-numeric">JST XAコネクタ ベース付ポスト サイド型 2P</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://www.marutsu.co.jp/shohin_64061/" target="_blank">64円</a></td>
                      </tr>
                      <tr>
                        <td class="mdl-data-table__cell--non-numeric"></td>
                        <td class="mdl-data-table__cell--non-numeric">ピンヘッダ</td>
                        <td class="mdl-data-table__cell--non-numeric">各社 I型 1列40ピン</td>
                        <td>1</td>
                        <td class="mdl-data-table__cell--non-numeric"><a href="http://akizukidenshi.com/catalog/g/gC-00167/" target="_blank">40円</a></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <h4>完成</h4>
                <p>
                  PWMによるモータの回転速度制御との相性も良く，約20kHzという高速なPWM信号でもスムースにモータの回転速度を変化させることが可能でした．
                  20KHz付近になると可聴域の上限に近いので，モータの動作音は大変静かに感じられます．
                </p>

                <a href="img/circuit_md_fet_pn/img01.jpg" data-lightbox="md" data-title="FETモジュール MP4212を使用したモータドライバ">
                  <img src="img/circuit_md_fet_pn/img01.jpg" alt="FETモジュール MP4212を使用したモータドライバ" />
                </a>

                <a href="img/circuit_md_fet_pn/img02.jpg" data-lightbox="md" data-title="FETモジュール MP4212を使用したモータドライバ">
                  <img src="img/circuit_md_fet_pn/img02.jpg" alt="FETモジュール MP4212を使用したモータドライバ" />
                </a>

                <a href="img/circuit_md_fet_pn/img03.jpg" data-lightbox="md" data-title="FETモジュール MP4212を使用したモータドライバ">
                  <img src="img/circuit_md_fet_pn/img03.jpg" alt="FETモジュール MP4212を使用したモータドライバ" />
                </a>
              </section>
            </div>
            <div class="mdl-grid">
              <div class="mdl-cell mdl-cell--6-col">
                <div class="mdl-cell--amazon-banner">
                  <iframe class="amazon-banner-2" src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=12&l=ez&f=ifr&linkID=a7ec7ffcf94f21c2beaf0e9d83c8042d&t=keitetsu-22&tracking_id=keitetsu-22" width="300" height="250" style="border:none;"></iframe>
                </div>
              </div>
              <div class="mdl-cell mdl-cell--6-col">
                <div class="mdl-cell--amazon-banner">
                  <iframe class="amazon-banner-2" src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=12&l=ur1&category=consumables&banner=01FFPGM6WNKYF9VQMHR2&f=ifr&linkID=8787af772f93befc97ae2df9f989341c&t=keitetsu-22&tracking_id=keitetsu-22" width="300" height="250" style="border:none;"></iframe>
                </div>
              </div>
            </div>
          </div>
          <div class="mdl-cell mdl-cell--2-col-desktop mdl-cell--2-col-tablet mdl-cell--hide-phone">
            <div class="mdl-cell--amazon-banner">
              <iframe class="amazon-banner-1" src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=11&l=ez&f=ifr&linkID=94c5721e7acc89e5886e59b6c10e7739&t=keitetsu-22&tracking_id=keitetsu-22" width="120" height="600" style="border:none;"></iframe>
            </div>
          </div>
        </div>
        <footer class="mdl-mini-footer">
          <div class="mdl-mini-footer__left-section">
            <div class="mdl-logo">&copy; 2004-<script>showNowYear();</script> Keitetsu</div>
          </div>
          <div class="mdl-mini-footer__right-section">
            <ul class="mdl-mini-footer__link-list">
              <li><a href="index.html#help">Help</a></li>
            </ul>
          </div>
        </footer>
      </main>
    </div>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
  </body>
</html>
